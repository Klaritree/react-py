"use strict";(self.webpackChunkreact_py_docs=self.webpackChunkreact_py_docs||[]).push([[344],{2096:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>g,exampleCode:()=>p,exampleDeleteCode:()=>x,exampleGetCode:()=>u,examplePostCode:()=>m,examplePutCode:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var s=n(7624),r=n(2172),o=n(5800);const i={sidebar_position:7},a="Making API Calls",l={id:"examples/making-api-calls",title:"Making API Calls",description:"Due to sockets being unavailable in Pyodide, http libraries are currently unsupported out of the box.",source:"@site/docs/examples/making-api-calls.mdx",sourceDirName:"examples",slug:"/examples/making-api-calls",permalink:"/react-py/docs/examples/making-api-calls",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"Custom Modules",permalink:"/react-py/docs/examples/custom-modules"},next:{title:"User Input",permalink:"/react-py/docs/examples/user-input"}},d={},c=[{value:"<code>GET</code>",id:"get",level:2},{value:"<code>POST</code>",id:"post",level:2},{value:"<code>PUT</code>",id:"put",level:2},{value:"<code>DELETE</code>",id:"delete",level:2}],p="import requests\nresponse = requests.get('https://api.github.com/repos/elilambnz/react-py')\ndata = response.json()\n\nprint(\"*\" * 50)\nprint(f\"Repository: {data['full_name']}\")\nprint(f\"Owner: {data['owner']['login']}\")\nprint(f\"Number of stars: {data['stargazers_count']} \u2b50\ufe0f\")\nprint(f\"Number of forks: {data['forks_count']} \ud83c\udf74\")\nprint(f\"Number of watchers: {data['watchers_count']} \ud83d\udc40\")\nprint(\"*\" * 50)\n",u="import requests\nresponse = requests.get('https://reqres.in/api/users/2')\ndata = response.json()\n\nprint(data)\n",m='import requests\nresponse = requests.post(\'https://reqres.in/api/users\', { "name": "morpheus", "job": "leader" })\ndata = response.json()\n\nprint(data)\n',h='import requests\nresponse = requests.put(\'https://reqres.in/api/users/2\', { "name": "morpheus", "job": "zion resident" })\ndata = response.json()\n\nprint(data)\n',x="import requests\nresponse = requests.delete('https://reqres.in/api/users/2')\n\nif response.status_code == 204:\n  print ('Success')\n";function f(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,r.useMDXComponents)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"making-api-calls",children:"Making API Calls"}),"\n",(0,s.jsxs)(t.p,{children:["Due to sockets being unavailable in Pyodide, http libraries are ",(0,s.jsx)(t.a,{href:"https://pyodide.org/en/stable/project/roadmap.html#write-http-client-in-terms-of-web-apis",children:"currently unsupported"})," out of the box."]}),"\n",(0,s.jsxs)(t.p,{children:["A patch for ",(0,s.jsx)(t.code,{children:"requests"})," and ",(0,s.jsx)(t.code,{children:"urllib"})," has been provided by the package ",(0,s.jsx)(t.a,{href:"https://github.com/koenvo/pyodide-http",children:"Pyodide-HTTP"})," and is preinstalled in ",(0,s.jsx)(t.code,{children:"react-py"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["See ",(0,s.jsx)(t.a,{href:"using-packages",children:"Using Packages"})," for package installation instructions, for these examples the following ",(0,s.jsx)(t.code,{children:"Packages"})," object has be used:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"{\n  micropip: ['requests']\n}\n"})}),"\n",(0,s.jsx)(t.p,{children:"Try it out:"}),"\n","\n",(0,s.jsx)(o.default,{code:p,packages:{micropip:["requests"]}}),"\n",(0,s.jsx)(t.h2,{id:"get",children:(0,s.jsx)(t.code,{children:"GET"})}),"\n","\n",(0,s.jsx)(o.default,{code:u,packages:{micropip:["requests"]}}),"\n",(0,s.jsx)(t.h2,{id:"post",children:(0,s.jsx)(t.code,{children:"POST"})}),"\n","\n",(0,s.jsx)(o.default,{code:m,packages:{micropip:["requests"]}}),"\n",(0,s.jsx)(t.h2,{id:"put",children:(0,s.jsx)(t.code,{children:"PUT"})}),"\n","\n",(0,s.jsx)(o.default,{code:h,packages:{micropip:["requests"]}}),"\n",(0,s.jsx)(t.h2,{id:"delete",children:(0,s.jsx)(t.code,{children:"DELETE"})}),"\n","\n",(0,s.jsx)(o.default,{code:x,packages:{micropip:["requests"]}})]})}function g(e={}){const{wrapper:t}={...(0,r.useMDXComponents)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(f,{...e})}):f(e)}},5800:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var s=n(1504),r=n(656),o=n(6528),i=n(4404),a=n(8764),l=n(4716),d=n(9548),c=n(7624);function p(e){const{prompt:t,onSubmit:n}=e,[r,o]=(0,s.useState)(""),i=(0,s.useRef)();return(0,s.useEffect)((()=>{i.current&&i.current.focus()}),[i.current]),(0,c.jsxs)("div",{className:"mt-4 lg:w-1/2",children:[(0,c.jsx)("label",{htmlFor:"input",className:"block text-sm font-medium text-gray-700 dark:text-gray-100",children:"Input"}),(0,c.jsxs)("div",{className:"mt-1 flex rounded-md shadow-sm",children:[(0,c.jsx)("div",{className:"relative flex flex-grow items-stretch focus-within:z-10",children:(0,c.jsx)("input",{ref:i,type:"text",name:"input",id:"input",className:"block w-full rounded-l-md border-none bg-neutral-200 px-2 py-1.5 placeholder-gray-400 shadow-sm focus:ring-0 dark:bg-neutral-600 sm:text-sm",placeholder:t,onChange:e=>o(e.target.value),onKeyDown:e=>"Enter"===e.key&&n(r)})}),(0,c.jsxs)("button",{type:"button",className:"relative -ml-px inline-flex items-center space-x-2 rounded-r-md border border-none border-gray-300 bg-gray-50 px-4 py-2 text-sm font-medium text-gray-700 hover:cursor-pointer hover:bg-gray-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500",onClick:()=>n(r),children:[(0,c.jsx)(d.default,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"}),(0,c.jsx)("span",{children:"Submit"})]})]})]})}var u=n(472),m=n(236),h=n(1203);const x={enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,highlightActiveLine:!1,showPrintMargin:!1},f=e=>{e.renderer.setScrollMargin(10,10,0,0),e.moveCursorTo(0,0)};function g(e){const{code:t,packages:d}=e,[g,b]=(0,s.useState)(t.trimEnd()),[j,v]=(0,s.useState)(!1);(0,s.useEffect)((()=>{b(t.trimEnd()),v(!1)}),[t]);const{colorMode:y}=(0,o.useColorMode)(),{runPython:k,stdout:w,stderr:C,isLoading:N,isRunning:P,interruptExecution:q,isAwaitingInput:E,sendInput:M,prompt:S}=(0,i.usePython)({packages:d});return(0,c.jsxs)("div",{className:"relative mb-10 flex flex-col",children:[(0,c.jsx)(a.default,{items:[{label:"Run",icon:u.default,onClick:function(){k(g),v(!0)},disabled:N||P,hidden:P},{label:"Stop",icon:m.default,onClick:function(){q(),v(!1)},hidden:!P},{label:"Reset",icon:h.default,onClick:function(){v(!1),b(t.trimEnd())},disabled:P}],isAwaitingInput:E}),N&&(0,c.jsx)(l.default,{}),(0,c.jsx)(r.default,{fallback:(0,c.jsx)("div",{children:"Loading..."}),children:()=>{const e=n(3496).default;return n(6352),n(7504),n(7164),n(7424),(0,c.jsx)(e,{value:g,mode:"python",name:"CodeBlock",fontSize:"0.9rem",className:"min-h-[7rem] overflow-clip rounded shadow-md",theme:"dark"===y?"idle_fingers":"textmate",onChange:e=>b(e),width:"100%",maxLines:1/0,onLoad:f,editorProps:{$blockScrolling:!0},setOptions:x})}}),E&&(0,c.jsx)(p,{prompt:S,onSubmit:M}),j&&(0,c.jsxs)("pre",{className:"mt-4 text-left",children:[(0,c.jsx)("code",{children:w}),(0,c.jsx)("code",{className:"text-red-500",children:C})]})]})}},8764:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});n(1504);var s=n(4971),r=n(7624);function o(e){const{items:t,isAwaitingInput:n}=e,o=t.filter((e=>!e.hidden));return(0,r.jsx)("div",{className:"pointer-events-none z-10 -mb-16 flex justify-end p-2",children:(0,r.jsxs)("div",{className:"pointer-events-auto space-x-2 rounded-md bg-white p-1 opacity-80 shadow-md hover:opacity-100",children:[n&&(0,r.jsxs)("div",{className:"inline-flex items-center rounded-md bg-sky-500 px-4 py-2 text-sm font-semibold leading-6 text-white shadow",children:[(0,r.jsxs)("svg",{className:"-ml-1 mr-3 h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("span",{children:"Awaiting input..."})]}),(0,r.jsx)("span",{className:"isolate inline-flex rounded-md",children:o.map(((e,t)=>(0,r.jsxs)("button",{type:"button",onClick:e.onClick,disabled:e.disabled,className:(0,s.default)("relative inline-flex items-center border border-none border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 focus:z-10 focus:outline-none focus:ring-0",e.disabled?"opacity-50 hover:cursor-not-allowed":"opacity-75 hover:cursor-pointer hover:bg-gray-50 hover:opacity-100",0===t&&"rounded-l-md",t===o.length-1&&"rounded-r-md"),children:[(0,r.jsx)(e.icon,{className:"-ml-1 mr-2 h-5 w-5 text-gray-400","aria-hidden":"true"}),e.label]},e.label)))})]})})}},4716:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});n(1504);var s=n(7624);function r(){return(0,s.jsx)("div",{className:"pointer-events-none absolute bottom-0 right-0 z-10 flex justify-end p-2",children:(0,s.jsxs)("div",{className:"inline-flex items-center rounded-md bg-sky-500 px-4 py-2 text-sm font-semibold leading-6 text-white shadow",children:[(0,s.jsxs)("svg",{className:"-ml-1 mr-3 h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Setting up environment..."]})})}},9548:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var s=n(1504);const r=s.forwardRef((function({title:e,titleId:t,...n},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,s.createElement("path",{d:"M3.105 2.288a.75.75 0 0 0-.826.95l1.414 4.926A1.5 1.5 0 0 0 5.135 9.25h6.115a.75.75 0 0 1 0 1.5H5.135a1.5 1.5 0 0 0-1.442 1.086l-1.414 4.926a.75.75 0 0 0 .826.95 28.897 28.897 0 0 0 15.293-7.155.75.75 0 0 0 0-1.114A28.897 28.897 0 0 0 3.105 2.288Z"}))}))},2172:(e,t,n)=>{n.r(t),n.d(t,{MDXProvider:()=>a,useMDXComponents:()=>i});var s=n(1504);const r={},o=s.createContext(r);function i(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);